#!/usr/bin/env python
# emacs: -*- mode: python; py-indent-offset: 4; tab-width: 4; indent-tabs-mode: nil -*-
# ex: set sts=4 ts=4 sw=4 noet:
# ## ### ### ### ### ### ### ### ### ### ### ### ### ### ### ### ### ### ### ##
#
#   See COPYING file distributed along with the datalad package for the
#   copyright and license terms.
#
### ### ### ### ### ### ### ### ### ### ### ### ### ### ### ### ### ### ### ##
"""A shim to invoke DataLad top-level command line utility"""

if __name__ == '__main__':
    try:
        import datalad
    except ImportError:
        # must be running within source code
        from os.path import dirname
        import sys
        sys.path.append(dirname(dirname(__file__)))

    # TODO: redo neatly
    from os.path import basename
    callname = basename(__file__)

    annex_special_remote_prefix = 'git-annex-remote-dl+'

    if callname == 'datalad':
        from datalad.cmdline.main import main
        main()
    elif callname.startswith(annex_special_remote_prefix):
        # Support custom options per each
        from datalad.customremotes.main import main
        main(backend=callname[len(annex_special_remote_prefix):])
    else:
        raise RuntimeError("I don't know how to behave as %s" % callname)
